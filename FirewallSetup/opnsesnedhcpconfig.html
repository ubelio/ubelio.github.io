<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OPNsense DHCP Configuration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #C9C8BF;
      color: #141413;
      margin: 0;
    }
    header {
      background-color: #141413;
      color: #C9C8BF;
      padding: 30px 20px;
      text-align: center;
    }
    nav {
      background-color: #AFACA1;
      padding: 10px;
      text-align: center;
    }
    nav a {
      color: #141413;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      text-decoration: underline;
    }
    nav a.active {
      text-decoration: underline;
      color: #0073e6;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    h1, h2 {
      color: #141413;
    }
    ul, ol {
      padding-left: 20px;
    }
    figure {
      margin: 24px 0;
      padding: 12px;
      background-color: #E6E5DE;
      border: 1px solid #BDBBB2;
      border-radius: 8px;
    }
    .screenshot {
      display: block;
      max-width: 100%;
      width: 720px;
      height: auto;
      margin: 0 auto;
      border: 2px solid #141413;
      border-radius: 6px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15);
    }
    figcaption.screenshot-note {
      text-align: center;
      font-style: italic;
      color: #555;
      margin-top: 10px;
    }
    footer {
      background-color: #BDBBB2;
      text-align: center;
      padding: 20px;
      font-size: 0.9em;
    }
    footer a {
      color: #141413;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    .section-divider {
      border: none;
      border-top: 1px solid #BDBBB2;
      margin: 32px 0;
    }
  </style>
</head>
<body>

<header>
  <h1>OPNsense DHCP Configuration</h1>
  <p>Configure and validate DHCP scopes for each VLAN to ensure proper client addressing.</p>
</header>

<nav id="main-nav">
  <a href="/index.html">Home</a>
  <a href="/projects.html">Projects</a>
  <a href="/scripts.html">Scripts</a>
  <a href="/homelabconfig.html">Home-Lab Config</a>
  <a href="/labs.html">Labs</a>
  <a href="/contact.html">Contact</a>
</nav>

<script>
  const current = window.location.pathname.split("/").pop();
  document.querySelectorAll("#main-nav a").forEach(link => {
    if (link.getAttribute("href").endsWith(current)) {
      link.classList.add("active");
    }
  });
</script>

<div class="container">

  <h2>Tools Used</h2>
  <ul>
    <li>OPNsense Firewall</li>
    <li>Web GUI access</li>
    <li>Configured VLAN interfaces from Lab 2</li>
    <li>Client devices for lease validation</li>
    <li>Browser + screenshot tool</li>
  </ul>

  <h2>Steps Taken</h2>
  <ol>
    <li>Enabled DHCP service under <strong>Services → DHCPv4</strong> for each VLAN interface.</li>
    <li>Defined lease ranges (e.g., <code>192.168.10.50 – 192.168.10.200</code> for VLAN 10).</li>
    <li>Set the correct gateway (interface IP, e.g., <code>192.168.10.1</code>).</li>
    <li>Configured DNS servers (OPNsense resolver or external like <code>8.8.8.8</code>).</li>
    <li>Added optional static mappings for servers and management devices.</li>
    <li>Applied changes and restarted DHCP service.</li>
    <li>Validated by connecting a client to each VLAN and confirming lease acquisition.</li>
  </ol>

  <hr class="section-divider">

  <h2>Screenshot: DHCP Scope (VLAN 10)</h2>
  <figure>
    <a href="dhcp-scope-vlan10.png" target="_blank">
      <img src="dhcp-scope-vlan10.png" alt="DHCP scope for VLAN 10" class="screenshot">
    </a>
    <figcaption class="screenshot-note">Click to view full-size: DHCP scope configured for VLAN 10.</figcaption>
  </figure>

  <h2>Screenshot: DHCP Overview</h2>
  <figure>
    <a href="dhcp-overview.png" target="_blank">
      <img src="dhcp-overview.png" alt="DHCP overview showing all scopes" class="screenshot">
    </a>
    <figcaption class="screenshot-note">Click to view full-size: Overview of all DHCP scopes across VLANs.</figcaption>
  </figure>

  <h2>Screenshot: Lease Table</h2>
  <figure>
    <a href="dhcp-leases.png" target="_blank">
      <img src="dhcp-leases.png" alt="DHCP lease table" class="screenshot">
    </a>
    <figcaption class="screenshot-note">Click to view full-size: Successful lease pulled by a client device.</figcaption>
  </figure>

  <hr class="section-divider">

  <h2>Outcome</h2>
  <p>Each VLAN now has an active DHCP scope with correct gateway, DNS, and lease ranges. Clients successfully pull leases and appear in the DHCP lease table with proper addressing. This confirms that all VLANs are usable and ready for further network services.</p>

</div>

<footer>
  <p>Email: <a href="mailto:ubelio@ubeliofernandez.com">ubelio@ubeliofernandez.com</a></p>
  <p>LinkedIn: <a href="https://www.linkedin.com/in/ubelio/" target="_blank">https://www.linkedin.com/in/ubelio/</a></p>
</footer>

</body>
</html>
